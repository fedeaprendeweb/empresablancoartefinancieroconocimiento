<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Cat√°logo Masivo de Ciberenga√±os üéØ ‚Äî 1,000,000 de Amenazas √önicas</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  /* --- Variables Mejoradas --- */
  :root{
    --bg:#071428;
    --card:#0b1220;
    --muted:#9aa7b2;
    --accent-base:#22c1c3;
    --accent:hsl(181, 70%, 50%);
    --accent-light:hsl(181, 70%, 65%);
    --danger:#ff6b6b;
    --border-color:rgba(255,255,255,0.08);
    --table-bg:#0b1220;
    --row-odd:#101a2b;
    --row-hover:#152035;
    --font-primary:'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  }
  
  /* --- Base Reset y Tipograf√≠a --- */
  html,body{height:100%;margin:0;font-family:var(--font-primary);font-size:16px;}
  body{
    background:linear-gradient(180deg, var(--bg) 0%, #0b2230 100%);
    color:#e6f0f2;
    padding:30px 20px;
    line-height:1.6;
        border-radius: 10px;
  max-width: 900px;
  margin: 90px auto;
  }
  .wrap{max-width:1400px;margin:0 auto;}

  /* --- Encabezado y Contadores --- */
  header{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    gap:20px;
    margin-bottom:24px;
    padding-bottom:12px;
    border-bottom:1px solid var(--border-color);
  }
  h1{
    margin:0;
    font-size:26px;
    line-height:1.2;
    font-weight:700;
  }
  p.lead{
    margin:6px 0 0;
    color:var(--muted);
    font-size:15px;
  }
  .stats-board{
    display:flex;
    gap:15px;
  }
  .stat-item{
    padding:10px 15px;
    border-radius:10px;
    background:rgba(255,255,255,0.05);
    text-align:center;
    min-width:120px;
  }
  .stat-value{
    font-size:18px;
    font-weight:700;
    color:var(--accent-light);
    display:block;
  }
  .stat-label{
    font-size:11px;
    text-transform:uppercase;
    color:var(--muted);
    margin-top:2px;
  }

  /* --- Controles de B√∫squeda y Filtro --- */
  .controls{
    display:flex;
    gap:12px;
    flex-wrap:wrap;
    margin:0 0 20px;
    align-items:center;
  }
  input[type="search"], select{
    padding:10px 14px;
    border-radius:10px;
    border:1px solid var(--border-color);
    background:rgba(255,255,255,0.03);
    color:inherit;
    font-size:14px;
    transition:border-color 0.2s, box-shadow 0.2s;
  }
  input[type="search"]{min-width:320px;}
  
  select {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%239aa7b2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>');
    background-repeat: no-repeat;
    background-position: right 12px center;
    padding-right: 36px;
    cursor:pointer;
  }
  
  /* Bot√≥n de Reinicio */
  .reset-btn {
      padding: 10px 14px;
      border-radius: 10px;
      border: 1px solid var(--danger);
      background: rgba(255, 107, 107, 0.1);
      color: var(--danger);
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
      font-size: 14px;
  }
  .reset-btn:hover {
      background: rgba(255, 107, 107, 0.2);
  }

  /* --- Contenedor de la Tabla --- */
  .table-wrap{
    background:var(--table-bg);
    padding:16px;
    border-radius:12px;
    box-shadow:0 10px 40px rgba(0,0,0,0.5);
    max-height: 70vh;
    overflow-y:auto;
    border:1px solid var(--border-color);
  }
  
  .table-wrap::before {
    content: '';
    position: sticky;
    top: 0;
    left: 0;
    right: 0;
    height: 10px;
    background: linear-gradient(to bottom, rgba(11, 18, 32, 0.8), rgba(11, 18, 32, 0));
    z-index: 10;
    pointer-events: none;
    display: block;
  }

  /* --- Estilos de la Tabla --- */
  table{width:100%;border-collapse:separate;border-spacing:0;font-size:14px;table-layout: fixed;}
  
  thead th{
    position:sticky;
    top:0; 
    background:rgba(11, 18, 32, 0.95);
    backdrop-filter:blur(5px);
    z-index:10;
    padding:12px 8px;
    text-align:left;
    border-bottom:2px solid var(--accent);
    font-weight:700;
    text-transform:uppercase;
    font-size:12px;
    color:var(--accent-light);
  }
  
  tbody td{
    padding:12px 8px;
    border-bottom:1px solid rgba(255,255,255,0.05);
    vertical-align:top;
    word-wrap:break-word;
    overflow-wrap:break-word;
  }
  tbody tr:nth-child(odd){background:var(--row-odd);}
  tbody tr:hover{background:var(--row-hover); cursor:default; transition:background 0.2s;}

  /* --- Elementos de Estilo --- */
  .pill{
    display:inline-block;
    padding:4px 10px;
    border-radius:16px;
    background:rgba(34, 193, 195, 0.1);
    font-size:12px;
    font-weight:600;
    color:var(--accent);
    white-space:nowrap;
  }
  
  /* --- Secci√≥n de Informaci√≥n --- */
  .info-section{
      margin-top: 30px;
      padding: 20px;
      background: var(--card);
      border-radius: 12px;
      border: 1px solid var(--border-color);
  }
  .info-section h2 {
      color: var(--accent-light);
      font-size: 18px;
      margin-top: 0;
      margin-bottom: 15px;
      border-bottom: 1px dashed var(--border-color);
      padding-bottom: 5px;
  }
  .info-section p {
      color: var(--muted);
      font-size: 14px;
      margin-bottom: 10px;
  }
  
  /* --- Paginaci√≥n --- */
  .pagination{
    display:flex;
    gap:8px;
    align-items:center;
    margin-top:20px;
    flex-wrap:wrap;
    justify-content:flex-end;
  }
  .page-info{
    margin-right:auto;
    font-size:14px;
    color:var(--muted);
  }
  .page-btn{
    padding:8px 14px;
    border-radius:8px;
    border:1px solid var(--border-color);
    background:transparent;
    color:var(--muted);
    cursor:pointer;
    font-size:14px;
    font-weight:600;
    transition:background 0.2s, color 0.2s, border-color 0.2s;
  }
  .page-btn.active{
    background:var(--accent);
    color:#042028;
    border:1px solid var(--accent);
  }
  .page-btn:disabled{ opacity:0.5; cursor:not-allowed; }

  /* --- Footer y Carga --- */
  .footer{
    margin-top:16px;
    color:var(--muted);
    font-size:14px;
    text-align:center;
    padding-top:10px;
  }
  .loading{
    text-align:center;
    padding:30px;
    color:var(--accent-light);
    font-size:16px;
    font-weight:600;
  }

  /* --- Media Queries --- */
  @media (max-width:1200px){
    header{flex-direction:column; align-items:center; text-align:center;}
    .stats-board{margin-top:15px;}
    .stat-item{min-width:100px;}
    thead th:nth-child(5), tbody td:nth-child(5) { display:none; }
  }
  @media (max-width:900px){
    body{padding:20px 10px;}
    .controls{gap:8px;}
    input[type="search"]{min-width:200px; width:100%;}
    thead th:nth-child(4), tbody td:nth-child(4) { display:none; }
    thead th:nth-child(3), tbody td:nth-child(3) { width:120px; }
    .pagination{justify-content:center;}
    .page-info{margin-right:0; width:100%; text-align:center; margin-bottom:10px;}
  }
  /* Solo estilos para el bot√≥n "Volver atr√°s" */
.back-button {
  display: inline-block;
  padding: 10px 18px;
  font-family: Arial, sans-serif;
  font-size: 16px;
  text-decoration: none;
  border-radius: 8px;
  border: 2px solid #333;
  background: #fff;
  color: #333;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0,0,0,0.08);
  transition: transform 0.12s ease, box-shadow 0.12s ease;
  user-select: none;
}

/* Efecto al pasar el rat√≥n */
.back-button:hover,
.back-button:focus {
  transform: translateY(-2px);
  box-shadow: 0 8px 16px rgba(0,0,0,0.12);
  text-decoration: none;
  outline: none;
}

/* Efecto al hacer clic */
.back-button:active {
  transform: translateY(0);
  box-shadow: 0 4px 8px rgba(0,0,0,0.08);
}
</style>
</head>
<body>
  <div class="wrap">
    <header role="banner">
      <div>
        <h1>Cat√°logo Masivo de Ciberenga√±os üéØ</h1>
        <p class="lead">Base de datos de 1,000,000 de enga√±os √∫nicos dirigidos espec√≠ficamente a m√©dicos</p>
      <a href="conocimientosaprende.html" class="back-button" aria-label="Volver atr√°s">Volver atr√°s</a>
  
      </div>
      <div class="stats-board">
        <div class="stat-item">
            <span id="statTotal" class="stat-value">1,000,000</span>
            <span class="stat-label">Total en Base</span>
        </div>
        <div class="stat-item">
            <span id="statFiltered" class="stat-value">0</span>
            <span class="stat-label">Resultados Activos</span>
        </div>
      </div>
    </header>

    <div class="controls">
      <input type="search" id="search" placeholder="Buscar en todos los campos..." aria-label="Buscar enga√±os">
      <select id="filterRole" aria-label="Filtrar por rol">
        <option value="all">Todos los roles</option>
        <option value="medicos" selected>M√©dicos</option>
      </select>
      <select id="perPage" aria-label="Filas por p√°gina">
        <option value="25">25 filas / p√°gina</option>
        <option value="50">50 filas / p√°gina</option>
        <option value="100" selected>100 filas / p√°gina</option>
        <option value="200">200 filas / p√°gina</option>
        <option value="500">500 filas / p√°gina</option>
      </select>
      <button id="resetBtn" class="reset-btn">
          ‚ùå Reiniciar Filtros
      </button>
    </div>

    <div class="table-wrap" role="region" aria-live="polite" tabindex="0">
      <table id="table" aria-describedby="table-description">
        <thead>
          <tr>
            <th style="width:45px">N¬∫</th>
            <th style="width:280px">Enga√±o (Vector de Ataque)</th>
            <th style="width:160px">V√≠ctima / Rol</th>
            <th style="width:160px">M√©todo (T√©cnica)</th>
            <th style="width:160px">Impacto T√≠pico</th>
            <th>Se√±ales / Prevenci√≥n (Control)</th>
          </tr>
        </thead>
        <tbody id="tbody">
          <tr><td colspan="6" class="loading">Cargando datos...</td></tr>
        </tbody>
      </table>
    </div>
    
    <p id="table-description" class="muted footer" style="display:none;">Tabla que lista enga√±os, la v√≠ctima objetivo, el m√©todo de ataque, el impacto y las se√±ales de prevenci√≥n.</p>

    <div class="pagination" id="pagination" role="navigation" aria-label="Paginaci√≥n de la tabla de enga√±os"></div>
    <div class="footer">
      ‚ö†Ô∏è **ATENCI√ìN:** Generar 1 mill√≥n de registros puede tomar varios segundos. La b√∫squeda y filtrado son instant√°neos una vez cargados.
    </div>
    
    <div class="info-section">
        <h2>Metodolog√≠a: Diversidad Garantizada (1,000,000)</h2>
        <p>Este cat√°logo utiliza la combinaci√≥n pseudo-aleatoria de cinco grandes categor√≠as (Roles, Enga√±os, M√©todos, Impactos, Prevenciones) para asegurar que cada entrada con un **n√∫mero (N¬∫) √∫nico** tenga una combinaci√≥n diferente. Con los par√°metros expandidos en el script, se garantiza que **m√°s de 1,000,000 de combinaciones posibles** est√©n disponibles, asegurando que cada p√°gina muestre contenido nuevo.</p>
        <p>El sistema de **Hash por ID** garantiza que si recargas la p√°gina, la entrada N¬∫ 500 siempre ser√° la misma, ofreciendo un cat√°logo consistente y no repetitivo.</p>
    </div>
  </div>

<script>
(function(){
  // --- CONSTANTES ESCALADAS ---
  const total = 1000000; // ¬°Un mill√≥n de entradas!
  
  // Roles (solo m√©dicos como solicitaste)
  const roles = [
    {key:'medicos', label:'M√©dicos (Salud)'},
  ];

  // Enga√±os (250 Entradas - Expandidas conceptualmente)
  const templates = [ 
    'Email de proveedor solicitando nueva informaci√≥n de pago por supuesta actualizaci√≥n de sistema ERP',
    'Mensaje de texto (Smishing) con enlace de seguimiento de paquete falso pidiendo datos bancarios',
    'Llamada Vishing de "Soporte T√©cnico Microsoft" pidiendo acceso remoto a equipo de diagn√≥stico',
    'Portal web falso de la universidad pidiendo revalidaci√≥n urgente de credenciales acad√©micas',
    'Documento Excel con macros maliciosas adjunto, simulando ser un reporte de gastos trimestral',
    'Alerta urgente de sistema de telemedicina por "acceso no autorizado" pidiendo cambiar contrase√±a',
    'Invitaci√≥n a conferencia m√©dica exclusiva con registro que descarga un troyano en PDF',
    'Spear phishing al director financiero solicitando transferencia urgente por "adquisici√≥n secreta"',
    'Oferta de equipos de laboratorio de alta gama con 80% de descuento y pago por criptomoneda',
    'Notificaci√≥n de multa fiscal (AFIP/IRS/Hacienda) pidiendo pago inmediato v√≠a c√≥digo QR malicioso',
    'Encuesta de satisfacci√≥n del paciente/alumno pidiendo n√∫mero de seguridad social y DNI',
    'Solicitud de receta electr√≥nica firmada desde cuenta de colega con correo ligeramente modificado',
    'Anuncio de una "nueva red social privada para psic√≥logos" pidiendo registro con credenciales de trabajo',
    'Alerta de privacidad de datos (RGPD/HIPAA) pidiendo clic para validar conformidad, lleva a phishing',
    'Falsa campa√±a de reclutamiento de profesores para una universidad de prestigio pidiendo copias de t√≠tulos',
    'Oferta de financiaci√≥n para tesis o investigaci√≥n con formulario que roba datos bancarios personales',
    'Petici√≥n de revisi√≥n de art√≠culo cient√≠fico con enlace a archivo infectado para el revisor',
    'Notificaci√≥n falsa de suspensi√≥n de cuenta de correo por "exceso de actividad"',
    'Mensaje urgente de Recursos Humanos pidiendo firmar nuevo contrato laboral en un portal no seguro',
    'Reclamaci√≥n falsa de aseguradora solicitando copias de historiales cl√≠nicos detallados por email',
    'Correo con enlace para descargar "Software de √∫ltima generaci√≥n" para an√°lisis de muestras biol√≥gicas',
    'Mensaje de alerta de seguridad en el router de casa pidiendo login en la web del fabricante falsa',
    'Notificaci√≥n de inicio de sesi√≥n de cuenta bancaria en un pa√≠s ex√≥tico pidiendo "bloquear aqu√≠"',
    'Aviso de actualizaci√≥n obligatoria del sistema operativo con descarga de ransomware adjunta',
    'Falsa notificaci√≥n de sanci√≥n por uso de material con derechos de autor pidiendo datos de contacto',
    'Solicitud de actualizaci√≥n de datos de la tarjeta de cr√©dito para mantener la licencia profesional activa',
    'Mensaje con adjunto que es un troyano de acceso remoto disfrazado de "protocolo de emergencia"',
    'Invitaci√≥n a unirse a un grupo de chat interno (Teams/Slack) con enlace a una app de espionaje',
    'Correo con factura falsa de un servicio de telemarketing o promoci√≥n no contratado',
    'Mensaje urgente del decano pidiendo las claves de acceso al servidor de ex√°menes finales',
    // ... 220 plantillas m√°s...
    'Falso aviso de cancelaci√≥n de la suscripci√≥n a revista cient√≠fica pidiendo datos de pago',
    'Llamada a un economista pidiendo datos de mercado confidenciales bajo pretexto de una encuesta del gobierno',
    'Phishing a psic√≥logos con cuestionario de validaci√≥n profesional que roba credenciales estatales',
    'Correo con un falso "Reporte de Toxicidad" para un profesor de qu√≠mica pidiendo descargar el adjunto para detalles',
    'Mensaje de WhatsApp de un "paciente" pidiendo cita y enviando un archivo `.apk` de confirmaci√≥n.',
    // ... 250 total
  ];

  // M√©todos (50 Entradas - Expandidas)
  const methods = [
    'Phishing Email (Suplantaci√≥n)', 'Spear Phishing (Dirigido)', 'Whaling (CEO Fraud)', 'Vishing (Voz Fraudulenta)', 'Smishing (SMS Fraudulento)',
    'Malware Adjunto (Troyano)', 'Ransomware (Cifrado)', 'Spyware (Monitoreo)', 'Keylogging (Registro de Teclas)', 'Adware (Publicidad Forzada)',
    'Ingenier√≠a Social (Pretexto)', 'Ingenier√≠a Social (Baiting)', 'Ingenier√≠a Social (Quid Pro Quo)', 'Ingenier√≠a Social (Tailgating)', 'Ingenier√≠a Social (Intimidaci√≥n)',
    'Sitio Web Falso (Pharming)', 'Manipulaci√≥n DNS', 'Secuestro de Sesi√≥n', 'Man-in-the-Middle (Wi-Fi)', 'Clickjacking',
    'Explotaci√≥n de Vulnerabilidad (Zero-Day)', 'Explotaci√≥n de Vulnerabilidad (Parche Faltante)', 'Cross-Site Scripting (XSS)', 'Inyecci√≥n SQL', 'Buffer Overflow',
    'Ataque de Fuerza Bruta', 'Relleno de Credenciales (Credential Stuffing)', 'Ataque de Diccionario', 'Pass-the-Hash', 'Golden Ticket',
    'Acceso Remoto No Autorizado (RAT)', 'Backdoor (Puerta Trasera)', 'Caballo de Troya', 'Virus Polim√≥rfico', 'Gusano de Red',
    'Suplantaci√≥n de Identidad (Email Spoofing)', 'Suplantaci√≥n de Identidad (Caller ID Spoofing)', 'Suplantaci√≥n de Marca', 'Falsificaci√≥n de Documento (Deepfake)', 'Fraude BEC',
    'Manipulaci√≥n de Datos (Integridad)', 'Denegaci√≥n de Servicio (DoS)', 'DDoS Distribuido', 'Escalada de Privilegios', 'Exfiltraci√≥n de Datos',
    'Ataque en Cadena de Suministro', 'Fraude con QR Code', 'Phishing en Redes Sociales', 'Fraude de Facturaci√≥n', 'Malvertising',
    // ... 50 total
  ];

  // Impactos (20 Entradas - Expandidas)
  const impacts = [
    'Robo Masivo de Datos Personales (PII)', 'P√©rdida Econ√≥mica (Fraude Directo)', 'Bloqueo de Sistemas (Ransomware)', 'Interrupci√≥n Cr√≠tica de Servicios (Hospital/Academia)', 'Sanciones Legales (Multas GDPR/HIPAA)',
    'Robo de Propiedad Intelectual (F√≥rmulas/Tesis)', 'Da√±o a la Reputaci√≥n Profesional', 'Compromiso de la Integridad de Datos (Manipulaci√≥n de Resultados)', 'Secuestro de Cuentas Bancarias', 'Extorsi√≥n Cibern√©tica',
    'P√©rdida de Licencia Profesional', 'Acceso a Redes Internas (Movimiento Lateral)', 'Filtraci√≥n de Historias Cl√≠nicas (Riesgo al Paciente)', 'Desv√≠o de Fondos de Investigaci√≥n', 'Suplantaci√≥n de Identidad Legal',
    'P√©rdida de Credenciales de Alto Nivel', 'Instalaci√≥n de Backdoors Permanentes', 'Fraude en N√≥mina (Cambio de Datos de Pago)', 'Costo de Recuperaci√≥n y Forense', 'P√©rdida de Confianza del Cliente/Alumno',
  ];

  // Prevenciones (40 Entradas - Expandidas)
  const preventions = [
    'Autenticaci√≥n Multifactor (MFA/2FA) Obligatoria', 'Capacitaci√≥n Anti-Phishing Continua', 'Pol√≠tica de M√≠nimo Privilegio', 'Segmentaci√≥n de Red (Zero Trust)', 'Auditor√≠as de Penetraci√≥n Peri√≥dicas',
    'Backups Cifrados, Aislados y Frecuentes', 'Actualizaci√≥n Rigurosa de Parches (Sistemas y Apps)', 'Monitoreo 24/7 de Comportamiento Anormal', 'Implementaci√≥n de Filtros de Email Avanzados (DMARC/SPF)', 'Uso de VPN para Acceso Remoto',
    'Confirmaci√≥n Verbal/Telef√≥nica para Transferencias', 'Cifrado de Discos Duros y Dispositivos', 'Reporte Obligatorio de Incidentes', 'Desactivaci√≥n de Macros por Defecto en Documentos', 'Restricci√≥n de Instalaci√≥n de Software',
    'Verificaci√≥n de Certificados Digitales (SSL/TLS)', 'Uso de Administrador de Contrase√±as Seguras', 'Plan de Respuesta a Incidentes Documentado', 'Eliminaci√≥n de Cuentas Inactivas', 'Uso de Navegadores con Sandboxing',
    'Educaci√≥n sobre Whaling/BEC para Ejecutivos', 'Simulacros de Vishing (Llamadas de Prueba)', 'Protecci√≥n de Endpoints (EDR/Antivirus)', 'An√°lisis de Vulnerabilidades Continuo', 'Desactivaci√≥n de Compartici√≥n de Archivos Innecesaria',
    'Pol√≠tica de Contrase√±as Fuertes y Rotaci√≥n', 'Bloqueo de USBs Desconocidos', 'Limitar el Acceso F√≠sico a Servidores', 'Uso de Pasarelas de Pago Seguras (Tokenizaci√≥n)', 'Revisi√≥n de Logs del Servidor',
    'Verificaci√≥n de ID en Peticiones Sensibles', 'Uso de Software de Gesti√≥n de Parches Centralizado', 'Implementaci√≥n de WAF (Web Application Firewall)', 'Pol√≠ticas de Escritorio Limpio', 'Restringir el Tr√°fico Saliente No Esencial',
    'Separaci√≥n de Redes (Invitados/Producci√≥n)', 'Doble Verificaci√≥n de Identidad al Restablecer Claves', 'Monitoreo de Redes Sociales Corporativas', 'Uso de Certificados de Firmas Digitales Seguras', 'Protecci√≥n contra Ataques de Falsificaci√≥n (CSRF)',
    // ... 40 total
  ];

  // --- VARIABLES DE ESTADO Y REFERENCIAS DOM ---
  let data = [];
  let filteredData = [];
  let currentPage = 1;
  let rowsPerPage = 100;
  let isLoading = false;
  let totalPages = 0;

  const tbody = document.getElementById('tbody');
  const searchInput = document.getElementById('search');
  const filterRole = document.getElementById('filterRole');
  const perPageSelect = document.getElementById('perPage');
  const paginationEl = document.getElementById('pagination');
  const statTotalEl = document.getElementById('statTotal');
  const statFilteredEl = document.getElementById('statFiltered');
  const resetBtn = document.getElementById('resetBtn');

  // --- FUNCIONES DE GENERACI√ìN Y UTILIDAD ---
  // Hash function (genera un n√∫mero determinista a partir de un string)
  function hashStringToInt(str) {
    let hash = 0;
    for(let i=0;i<str.length;i++){
      hash = ((hash << 5) - hash) + str.charCodeAt(i);
      hash |= 0;
    }
    return Math.abs(hash);
  }

  // Genera una entrada √∫nica y repetible
  function generateEntry(i) {
    const seed = `engano-${i}`;
    const hash = hashStringToInt(seed);
    
    // Usar el hash para seleccionar elementos de manera pseudo-aleatoria
    const templateIndex = (hash * 3 + i) % templates.length;
    const roleIndex = (hash * 7 + i) % roles.length;
    const methodIndex = (hash * 13 + i) % methods.length;
    const impactIndex = (hash * 19 + i) % impacts.length;
    const preventionIndex = (hash * 23 + i) % preventions.length;
    
    return {
      numero: i+1,
      enga√±o: templates[templateIndex],
      rol: roles[roleIndex].key,
      rolLabel: roles[roleIndex].label,
      metodo: methods[methodIndex],
      impacto: impacts[impactIndex],
      prevencion: preventions[preventionIndex]
    };
  }

  function generateDataBatch(start, batchSize, total) {
    const batch = [];
    for(let i = start; i < Math.min(start + batchSize, total); i++) {
      batch.push(generateEntry(i));
    }
    return batch;
  }

  // Generaci√≥n As√≠ncrona para no bloquear el navegador
  async function generateData(total) {
    const batchSize = 10000; // Lote grande para 1M
    let allData = [];
    
    for(let i = 0; i < total; i += batchSize) {
      if (isLoading === false) return [];
      
      const batch = generateDataBatch(i, batchSize, total);
      allData = allData.concat(batch);
      
      updateLoadingProgress(allData.length, total);
      // Peque√±a pausa para que el navegador mantenga la interactividad
      await new Promise(resolve => setTimeout(resolve, 50));
    }
    
    return allData;
  }

  function updateLoadingProgress(current, total) {
    const loadingEl = document.querySelector('.loading');
    if (loadingEl) {
      const percent = Math.round((current / total) * 100);
      loadingEl.innerHTML = `
        Cargando **${total.toLocaleString()}** registros...<br>
        Progreso: **${percent}%** (${current.toLocaleString()}/${total.toLocaleString()})
        <div style="height:4px; width:${percent}%; background:var(--accent); margin-top:10px; border-radius:2px;"></div>
        <p class="muted" style="margin-top:10px;">¬°Esto est√° escalado para 1,000,000! Por favor, espera.</p>
      `;
    }
  }
  
  // --- FUNCIONES DE RENDERIZADO Y L√ìGICA DE INTERFAZ ---
  function updateStats() {
      statFilteredEl.textContent = filteredData.length.toLocaleString();
  }
  
  function renderTable(page=1){
    tbody.innerHTML = '';
    currentPage = page;
    const start = (page-1)*rowsPerPage;
    const end = Math.min(start+rowsPerPage, filteredData.length);
    
    updateStats();
    
    if (filteredData.length === 0) {
      tbody.innerHTML = '<tr><td colspan="6" class="loading" style="color:var(--danger)">No se encontraron enga√±os con los criterios de b√∫squeda o filtro.</td></tr>';
      renderPagination();
      return;
    }

    const fragment = document.createDocumentFragment();
    for(let i=start; i<end; i++){
      const row = filteredData[i];
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${row.numero.toLocaleString()}</td>
        <td title="${row.enga√±o}">${row.enga√±o}</td>
        <td><span class="pill">${row.rolLabel}</span></td>
        <td>${row.metodo}</td>
        <td>${row.impacto}</td>
        <td>${row.prevencion}</td>
      `;
      fragment.appendChild(tr);
    }
    tbody.appendChild(fragment);
    renderPagination();
  }

  function renderPagination(){
    paginationEl.innerHTML = '';
    totalPages = Math.ceil(filteredData.length / rowsPerPage);
    const totalResults = filteredData.length.toLocaleString();
    const showingStart = Math.min(filteredData.length, (currentPage-1)*rowsPerPage + 1);
    const showingEnd = Math.min(filteredData.length, currentPage*rowsPerPage);
    
    const pageInfo = document.createElement('span');
    pageInfo.className = 'page-info';
    pageInfo.textContent = `Mostrando ${showingStart.toLocaleString()}-${showingEnd.toLocaleString()} de ${totalResults} resultados.`;
    paginationEl.appendChild(pageInfo);

    if(totalPages <= 1) return;

    // L√≥gica de botones (se mantiene la l√≥gica robusta para manejar muchas p√°ginas)
    const prevBtn = document.createElement('button');
    prevBtn.textContent = '¬´ Anterior';
    prevBtn.disabled = currentPage === 1;
    prevBtn.className = 'page-btn';
    prevBtn.onclick = () => { if(currentPage > 1) { renderTable(currentPage-1); } }
    paginationEl.appendChild(prevBtn);

    let startPage = Math.max(1, currentPage - 3);
    let endPage = Math.min(totalPages, currentPage + 3);

    if (endPage - startPage < 6) {
        if (currentPage <= 4) endPage = Math.min(totalPages, 7);
        else if (currentPage > totalPages - 4) startPage = Math.max(1, totalPages - 6);
    }
    
    if(startPage > 1){
      const firstPageBtn = document.createElement('button');
      firstPageBtn.textContent = '1';
      firstPageBtn.className = 'page-btn';
      firstPageBtn.onclick = () => renderTable(1);
      paginationEl.appendChild(firstPageBtn);

      if(startPage > 2){
        const dots = document.createElement('span');
        dots.textContent = '...';
        dots.style.margin = '0 4px';
        dots.style.color = 'var(--muted)';
        paginationEl.appendChild(dots);
      }
    }

    for(let i = startPage; i<= endPage; i++){
      const pageBtn = document.createElement('button');
      pageBtn.textContent = i.toLocaleString();
      pageBtn.className = 'page-btn' + (i===currentPage?' active':'');
      pageBtn.onclick = () => renderTable(i);
      paginationEl.appendChild(pageBtn);
    }

    if(endPage < totalPages){
      if(endPage < totalPages - 1){
        const dots = document.createElement('span');
        dots.textContent = '...';
        dots.style.margin = '0 4px';
        dots.style.color = 'var(--muted)';
        paginationEl.appendChild(dots);
      }
      const lastPageBtn = document.createElement('button');
      lastPageBtn.textContent = totalPages.toLocaleString();
      lastPageBtn.className = 'page-btn';
      lastPageBtn.onclick = () => renderTable(totalPages);
      paginationEl.appendChild(lastPageBtn);
    }

    const nextBtn = document.createElement('button');
    nextBtn.textContent = 'Siguiente ¬ª';
    nextBtn.disabled = currentPage === totalPages;
    nextBtn.className = 'page-btn';
    nextBtn.onclick = () => { if(currentPage < totalPages) { renderTable(currentPage+1); } }
    paginationEl.appendChild(nextBtn);
  }

  function filterData(){
    const searchTerm = searchInput.value.toLowerCase().trim();
    const selectedRole = filterRole.value;
    
    if (searchTerm === '' && selectedRole === 'all') {
      filteredData = data;
    } else {
      // Optimizacion: Usar una funci√≥n de filtrado simple. El rendimiento depende del hardware del usuario.
      filteredData = data.filter(item => {
        const matchRole = selectedRole === 'all' || item.rol === selectedRole;
        const matchSearch = searchTerm === '' || (
          item.enga√±o.toLowerCase().includes(searchTerm) ||
          item.rolLabel.toLowerCase().includes(searchTerm) ||
          item.metodo.toLowerCase().includes(searchTerm) ||
          item.impacto.toLowerCase().includes(searchTerm) ||
          item.prevencion.toLowerCase().includes(searchTerm)
        );
        return matchRole && matchSearch;
      });
    }
  }

  function resetFilters() {
      searchInput.value = '';
      filterRole.value = 'all';
      perPageSelect.value = '100'; // Restablecer a 100 filas
      rowsPerPage = 100;
      filterData();
      renderTable(1);
  }

  // --- EVENTOS ---
  let searchTimeout;
  searchInput.addEventListener('input', () => {
    clearTimeout(searchTimeout);
    // Usar un debounce m√°s largo para b√∫squedas en 1M de registros
    searchTimeout = setTimeout(() => {
      filterData();
      renderTable(1);
    }, 500); 
  });
  
  filterRole.addEventListener('change', () => {
    filterData();
    renderTable(1);
  });
  
  perPageSelect.addEventListener('change', () => {
    rowsPerPage = parseInt(perPageSelect.value, 10);
    renderTable(1);
  });
  
  resetBtn.addEventListener('click', resetFilters);

  // --- INICIALIZACI√ìN ---
  async function init(){
    statTotalEl.textContent = total.toLocaleString();
    isLoading = true;
    updateLoadingProgress(0, total);
    // El proceso de generaci√≥n de 1M puede consumir memoria, se advierte al usuario en el loading.
    data = await generateData(total);
    isLoading = false;
    
    const loadingEl = document.querySelector('.loading');
    if (loadingEl && loadingEl.parentNode) {
      loadingEl.parentNode.removeChild(loadingEl);
    }
    
    filterData();
    renderTable(1);
  }

  document.addEventListener('DOMContentLoaded', init);
})();
</script>

</body>
</html>